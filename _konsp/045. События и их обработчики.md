# 045. События и их обработчики

> Каждое событие представляет собой объект, который основан на интерфейсе Event и может иметь дополнительные поля и/или функции, позволяющие получить дополнительную информацию о том, что произошло. События могут описывать всё, что угодно: от простых действий пользователя до действий автоматизированной системы рассылки уведомлений, создаваемых моделью формирования экрана. Полный список различных типов событий приведен в разделе Event > Интерфейсы, основанные на Event.

# Способ назначить обработчик события:
1. использовать html-атрибут
	```html
	<button onclick="alert('Click')" id="btn">Нажми меня</button>
	```
	Это плохая практика. Не надо так делать.

2. из скрипта, используя DOM-дерево
	```javascript
	const btn = document.querySelector('#btn');
	btn.onclick = function () { alert('Click'); }
	btn.onclick = null; // убрать обработчик события
	```
	В реальных проектах такой код почти не используется.
	```javascript
	// У этого метода есть большая проблема - метод btn.onclick можно где-то переопределить и будет работать только последний обработчик:
	const btn = document.querySelector('#btn');
	btn.onclick = function () { alert('Click'); }
	// ... какой-то код ...
	btn.onclick = function () { alert('Click 2'); }
	```

3. из скрипта использовать `EventListener`
	```javascript
	const btn = document.querySelector('#btn');
	const btn_overlay = document.querySelector('#overlay');

	const fOnClick = (e) => {
		console.log('fOnClick');
		console.log('target=', e.target);
		console.log('currentTarget', e.currentTarget);
		// удалить обработчик события с "e.target"
		// на e.currentTarget обработчик остался
		// при клике на кнопку "btn" будет вызываться обработчик с "btn_overlay" до тех пор, пока не кликнем на элемент "btn_overlay"
		e.target.removeEventListener('click', fOnClick);
	};

	btn.addEventListener('click', fOnClick );
	btn_overlay.addEventListener('click', fOnClick );
	```
> Всплытие событий это когда срабатывает событие не только на элементе, но и на вложенных элементах. И последовательность срабатывания будет начиная с самого вложенного и будет "всплвать" до самого внешнего. В примере выше событие `click` (которому назначен обработчик `fOnClick`) сначала сработает на `btn` затем на `btn_overlay`.

## отменить стандартное поведение браузера на событие

	event.preventDefault()

```javascript
const link = document.querySelector('a');

// отменить стандартное поведение браузера на событие "click"
link.addEventListener('click', (e) => console.log('\nlink click_1') ); // будет срабатывать
link.addEventListener('click', (e) => {
	e.preventDefault(); // переход по ссылке не сработает
	console.log('link click_2');
} ); // будет срабатывать
link.addEventListener('click', (e) => console.log('link click_3') ); // будет срабатывать
```

## опции события

```javascript
target.addEventListener(type, listener[, options]);

// once: Boolean указывает, что обработчик должен быть вызван не более одного раза после добавления. 
// Если true, обработчик автоматически удаляется при вызове.
btn.addEventListener('click', () => console.log('btn.click once'), {once: true} );
```

---

## Ссылки

- Список родных событий Javascript
	- https://oddler.ru/blog/i63
- Справочник по событиям
	- https://developer.mozilla.org/ru/docs/Web/Events
- Метод EventTarget.addEventListener()
	- https://developer.mozilla.org/ru/docs/Web/API/EventTarget/addEventListener
- Метод EventTarget.removeEventListener()
	- https://developer.mozilla.org/ru/docs/Web/API/EventTarget/removeEventListener
- Объект события - Event
	- https://developer.mozilla.org/ru/docs/Web/API/Event

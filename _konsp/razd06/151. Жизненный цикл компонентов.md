# 151. Жизненный цикл компонентов

## `React.Component`

### Обзор

React позволяет определять компоненты как классы или функции. В настоящее время классовые компоненты имеют больше возможностей. Они разобраны на этой странице. Чтобы определить такой компонент, необходимо отнаследоваться от `React.Component`:
```javascript
class Welcome extends React.Component {
  render() {
    return <h1>Привет, {this.props.name}</h1>;
  }
}
```

Единственный обязательный метод в подклассе `React.Component` — `render()`. Все остальные методы, описанные ниже, являются необязательными.

Мы рекомендуем не создавать собственные классы базовых компонентов. В компонентах React повторное использование кода обычно достигается за счёт композиции, а не наследования.

## Жизненный цикл компонента

Каждый компонент имеет несколько «методов жизненного цикла». Переопределение такого метода позволяет выполнять код на конкретном этапе этого процесса. Вы можете использовать эту диаграмму жизненного цикла как шпаргалку. Далее на странице полужирным шрифтом выделены самые распространённые методы жизненного цикла.

### Монтирование

При создании экземпляра компонента и его вставке в DOM, следующие методы вызываются в установленном порядке:
- `constructor()`
- static `getDerivedStateFromProps()`
- `render()`
- `componentDidMount()`


### Обновление

Обновление происходит при изменении пропсов или состояния. Следующие методы вызываются в установленном порядке при повторном рендере компонента:
- static `getDerivedStateFromProps()`
- `shouldComponentUpdate()`
- `render()`
- `getSnapshotBeforeUpdate()`
- `componentDidUpdate()`


### Размонтирование

Этот метод вызывается при удалении компонента из DOM:
- `componentWillUnmount()`

### Обработка ошибок

Следующие методы вызываются, если произошла ошибка в процессе рендеринга, методе жизненного цикла или конструкторе любого дочернего компонента.
- static `getDerivedStateFromError()`
- `componentDidCatch()`

### Другие методы API

В каждом компоненте доступны методы API:
- `setState()`
- `forceUpdate()`

### Свойства класса

- `defaultProps`
- `displayName`

### Свойства экземпляра
- `props`
- `state`

---

## Ссылки

- диаграмма ЖЦ
	- https://projects.wojtekmaj.pl/react-lifecycle-methods-diagram/
- Жизненный цикл компонента 
	- https://ru.legacy.reactjs.org/docs/react-component.html#the-component-lifecycle
- object-fit
	- https://developer.mozilla.org/ru/docs/Web/CSS/object-fit
- проверить домашнее задание
	- https://github.com/yankovalenko94/JS_task_answers/tree/master/React_Redux_step_13
- React Reconciliation
	- https://www.youtube.com/watch?v=A0W2n2azH5s
	- Данный выпуск посвящен ключевому алгоритму реакта "React Reconciliation". Именно он определяет разницу деревьев между обновлениями. Именно он делает так, что практически при любом количестве изменений вы получите заветные 60 кадров в секунду. И именно он настолько пере используем, чтобы работать как для React Native так и для браузера.
	
# 173. Навигация в приложении, React Router v5+

Модуль `react-router-dom` реализует управление роутами в приложении.

## установить `react-router-dom`

последнюю версию:

    npm i react-router-dom@latest --save

или указать версию:

    npm i react-router-dom@5.3.0 --save

> `--save` = модуль требуется и в продакшен буилде

---

## использование

```javascript
import React from 'react';
import { BrowserRouter as Router, Switch, Route, Link } from 'react-router-dom';

export default function App() {
	return (
		{/* контролирует роуты */}
		<Router>
			<div>
				<nav>
					<ul>
						<li>
							{/* создаёт ссылку на роут */}
							<Link to='/'>Home</Link>
						</li>
						<li>
							<Link to='/about'>About</Link>
						</li>
						<li>
							<Link to='/users'>Users</Link>
						</li>
					</ul>
				</nav>

				{/* <Switch> просматривает свои дочерние <Route> и
отображает первый, который соответствует текущему URL-адресу. */}
				<Switch>
					{/* блок, который будет рендериться, если path совпадает с роутом url-адреса.
						если нет атрибута "exact", то происходит сравнение по начальному фрагменту роута. то есть для линка "/ab", если роут "/ab" прописан ниже "/about", то вызовется "/about"
					*/}
					<Route path='/about'>
						<About />
					</Route>
					{/* "exact" - точное сравнение роута */}
					<Route exact path='/users'>
						<Users />
					</Route>
					<Route path='/'>
						<Home />
					</Route>
				</Switch>
			</div>
		</Router>
	);
}

function Home() {
	return <h2>Home</h2>;
}

function About() {
	return <h2>About</h2>;
}

function Users() {
	return <h2>Users</h2>;
}
```

---

## `<Redirect>`

Рендеринг `<Redirect>` приведет к переходу в новое место. Новое местоположение переопределит текущее местоположение в стеке истории, как это делают перенаправления на стороне сервера (HTTP 3xx).

```javascript
<Route exact path='/'>
	{loggedIn ? <Redirect to='/dashboard' /> : <PublicHomePage />}
</Route>
```

### `to: string`

URL-адрес для перенаправления. Любой действительный URL-адрес, который понимает path-to-regexp@^1.7.0. Все параметры URL, которые используются в to, должны быть включены в from.

```javascript
<Redirect to='/somewhere/else' />
```

### `to: object`

Место для перенаправления. pathname может быть любым допустимым URL-адресом, который понимает path-to-regexp@^1.7.0.

Доступ к объекту состояния можно получить через `this.props.location.state` в компоненте перенаправления. Этот новый ключ реферера (который не является специальным именем) затем будет доступен через `this.props.location.state.referrer` в компоненте входа, на который указывает путь '/login'

```javascript
<Redirect
	to={{
		pathname: '/login',
		search: '?utm=your+face',
		state: { referrer: currentLocation },
	}}
/>
```

---

## `<NavLink>`

Специальная версия `<Link>`, которая добавит атрибуты стиля к отображаемому элементу, если он соответствует текущему URL-адресу.

```javascript
<NavLink to='/about'>About</NavLink>
```

```javascript
<NavLink
	to='/faq'
	className={(isActive) => 'nav-link' + (!isActive ? ' unselected' : '')}
>
	FAQs
</NavLink>
```

---

## Ссылки

- React Router
  - https://v5.reactrouter.com/web/guides/quick-start
  - https://reactrouter.com/en/main
- Код из урока
  - https://github.com/yankovalenko94/JS_task_answers/tree/master/React_Redux_step_21
- Версии библиотеки
  - https://www.npmjs.com/package/react-router-dom
- Список обновлений
  - https://github.com/remix-run/react-router/releases
- Гайд по миграции
  - https://github.com/remix-run/react-router/blob/main/docs/upgrading/v5.md#upgrade-to-react-router-v6
